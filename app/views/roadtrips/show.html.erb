<div class="container">
  <div>
    <h1 class="m-3"> <%= @roadtrip.title %> </h1>
    <div class="show-roadtrip-top mt-2 mb-3">
      <div class="card-map-avatars">
        <% @roadtrip.users.each do |user| %>
          <%= cl_image_tag user.photo.key, class: "avatar-bordered" %>
        <% end %>
      </div>
      <div>
        <% add_partners =  '<i class="mt-1 fas fa-plus-circle text-danger" style="font-size: 24px"></i>' %>
        <p class="text-danger" style="font-size: 24px">  <%= link_to add_partners.html_safe, new_roadtrip_partner_path(@roadtrip), class: "text-danger", style: "font-size: 24px" %> Ajouter un participant </p>
      </div>
    </div>
  </div>
  <div class="show-roadtrip-core">
    <div class="roadtrip-itineraries">
      <div class="roadtrip-itineraries-top-infos">
        <h2 class="mt-3">Itinéraires</h2>
        <button class="button-green-show"> Consulter le trajet complet </button>
      </div>
        <div class="card-map-grid">

        <% @roadtrip.itineraries.each do |itinerary| %>
          <%= link_to itinerary_path(itinerary) do %>
            <div class="card-map">
              <div class="card-map-content">
                <img src="https://amtlarochelle.com/wp-content/uploads/2015/03/trajet.jpg" alt="L'itinéraire du jour">
              </div>
              <div class="card-map-bottom">
                <div class="card-map-bottom-left">
                  <p> <%= itinerary.name %> </p>
                </div>
                <div class="card-map-bottom-middle">
                  <p>Jour 1</p>
                </div>
                <div class="card-map-bottom-right">
                  <p>4h52</p>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>

        <% if @roadtrip.itineraries.size.zero? || (@roadtrip.itineraries.last && @roadtrip.itineraries.last.steps.size >= 2) %>
          <div class="card-map-add">
            <% add_itinerary =  '<i class="fas fa-plus plus-fa"></i>' %>
            <%= link_to add_itinerary.html_safe, roadtrip_itineraries_path(@roadtrip), method: :post %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="checklist-box background-white">
      <h2 class="text-center">Check-list</h2>
      <div>
        <% @roadtrip.tasks.each do |task|  %>
          <p>
            <input type="checkbox">
            <span><%= task.content %></span>
            <%= link_to task_path(task), method: :delete, data: { confirm: "Are you sure you want to remove this task ?"} do %>
              <i class="far fa-trash-alt fa-trash-size"></i>
            <% end %>
          </p>
        <% end %>
      </div>
      <div>
        <%= simple_form_for [ @roadtrip, @task ] do |f| %>
        <%= f.input :content %>
        <%= f.submit class: "btn button-green" %>
        <% end %>
      </div>

    </div>
  </div>

</div>
